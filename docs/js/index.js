let plan;const handleJson=e=>e.json(),handleText=e=>e.text(),$views=document.querySelector(".views"),$floorSelector=document.querySelector(".floor-selector"),$zoomSlider=document.querySelector(".zoom-slider"),views=[],floorOptions=[],hideNode=e=>e.hidden=!0,selectFloor=e=>{const{target:o}=e;$floorSelector.classList.toggle("expand"),o.hidden&&(floorOptions.forEach(hideNode),views.forEach(hideNode),o.hidden=!1,document.getElementById(o.dataset.ref).hidden=!1)},zoom=()=>document.body.style.setProperty("--custom-scale",$zoomSlider.value),loadPlan=e=>{const o=document.createDocumentFragment(),t=document.createDocumentFragment();plan=e,plan.forEach((e,n)=>{const d=document.createElement("div"),l=document.createElement("li");l.textContent=e.name,l.className="floor-option",floorOptions.push(l),d.hidden=l.hidden=!0,l.dataset.ref=d.id=`view${n}`,t.appendChild(l),d.className="view",views.push(d),o.appendChild(d),fetch(e.src).then(handleText).then(e=>{d.innerHTML=e;const o=d.querySelector("svg"),{width:t,height:n}=o.getBoundingClientRect(),l=Math.min(window.innerWidth/t,window.innerHeight/n);o.style.setProperty("--default-scale",l)})}),$views.appendChild(o),$floorSelector.appendChild(t),document.querySelector(".floor-option").hidden=!1,document.querySelector(".view").hidden=!1,$floorSelector.addEventListener("click",selectFloor),$zoomSlider.addEventListener("input",zoom)};fetch("/plan.json").then(handleJson).then(loadPlan);